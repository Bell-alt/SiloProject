<div th:fragment="content">
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
        
        <div th:each="file : ${files}" 
             class="group relative flex flex-col items-center p-4 rounded-xl border transition-all"
             th:classappend="${file.hasAccess} ? 'hover:bg-white hover:shadow-md cursor-pointer border-transparent' : 'opacity-40 grayscale cursor-not-allowed'">
            
            <div th:if="${!file.hasAccess}" class="absolute top-2 right-6 bg-red-500 text-white p-1 rounded-full z-10 shadow-lg">
                <i data-lucide="lock" class="w-3 h-3"></i>
            </div>
            
            <div class="mb-3 w-16 h-20 rounded-lg flex items-center justify-center border-2 transition-colors"
                 th:classappend="${file.hasAccess} ? 'bg-blue-100 border-blue-200 group-hover:bg-blue-600 group-hover:border-blue-700' : 'bg-gray-200 border-gray-300'">
                <i data-lucide="file-text" 
                   class="w-8 h-8 transition-colors"
                   th:classappend="${file.hasAccess} ? 'text-blue-600 group-hover:text-white' : 'text-gray-400'"></i>
            </div>

            <span class="text-xs font-bold text-center break-all text-gray-700" th:text="${file.fileName}">File Name</span>
            <span class="text-[10px] text-gray-400 mt-1" th:text="'Level ' + ${file.requiredLevel}">LV.1</span>

            <div th:if="${file.hasAccess}" 
                 class="absolute inset-0"
                 th:attr="hx-get='/file/view/' + ${file.fileIdx}"
                 hx-target="#main-content">
            </div>

            <div th:if="${!file.hasAccess}" 
                 class="absolute inset-0"
                 onclick="alert('Access Denied: Your security level is insufficient.')">
            </div>
        </div>

    </div>
</div>